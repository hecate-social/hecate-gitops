apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

# Include base infrastructure and apps
resources:
  - ../../infrastructure/sealed-secrets  # Must come first
  - ../../infrastructure/hecate
  - ../../infrastructure/git-server      # Local git server for user apps
  - ../../apps

# Cluster-specific patches
patches:
  # Hardware config detected at install time
  - path: hardware-patch.yaml
    target:
      kind: ConfigMap
      name: hecate-config
